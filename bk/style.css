/* ========================================
   基本トークン
======================================== */
:root {
  --primary-red:#ff6b6b;
  --sky-blue:#4ECDC4;
  --warm-yellow:#FFE66D;
  --vibrant-orange:#ff5353;
  --coral-pink:#FF9999;
  --warm-white:#FFFEF7;
  --shadow-soft:0 10px 25px rgba(0,0,0,0.15);
  --shadow-strong:0 20px 40px rgba(0,0,0,0.25);
  --ease-out:cubic-bezier(0.34,1.56,0.64,1);
  --ease-smooth:cubic-bezier(.4,0,.2,1);
}

/* ========================================
   ベース
======================================== */
* { box-sizing:border-box; margin:0; padding:0; }
body {
  font-family:"Hiragino Sans","Yu Gothic",sans-serif;
  color:#333;
  min-height:100vh;
  overflow:hidden;
  background:
    radial-gradient(circle at 35% 25%, rgba(255,190,140,.45) 0%, transparent 55%),
    radial-gradient(circle at 75% 70%, rgba(255,120,60,.35) 0%, transparent 60%),
    linear-gradient(135deg,#FFB070 0%, #FF8E53 45%, #FF6B2D 100%);
  perspective:1600px;
}
body.preload * {}

/* スクロールが無い前提でメイン中央表示 */
.floating-stage-wrapper {
  position:relative;
  width:100%;
  height:calc(100vh - 80px);
  top:0;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  padding-top:0;
}

/* ========================================
   ヘッダー
======================================== */
.tgs-mini-header {
  height:80px;
  display:flex;
  align-items:center;
  justify-content:center;
  backdrop-filter:blur(6px);
  background:rgba(255,255,255,0.55);
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  position:relative;
  z-index:50;
}
.header-inner { text-align:center; }
.tgs-title {
  font-size:2.1rem;
  font-weight:700;
  letter-spacing:.5px;
  color:var(--primary-red);
  opacity:1;
}
.tgs-subtitle {
  font-size:1.3rem;
  font-weight:600;
  color:var(--sky-blue);
  opacity:1;
}

/* ========================================
   浮遊ステージ
======================================== */
.floating-stage {
  position: relative;
  width:100vw;
  height:calc(100vh - 80px);
  max-width:none;
  /* 重なり予防: 余白不要なのでそのまま */
}

/* 既存のmaterialAppearアニメーションを無効化 */
.floating-item {
  position: absolute;
  top: 50%; 
  left: 50%;
  transform-origin: center;
  transform: translate(-50%, -50%); /* 出現/縮尺アニメ削除で単純化 */
  filter: drop-shadow(0 10px 25px rgba(0,0,0,.15));
  opacity: 1;
}

/* ホバー（内側停止 + 立体感） */
.floating-item:hover { 
  /* 削除: 拡大/影強調等の動的効果 */
  transform: translate(-50%, -50%);
  filter: drop-shadow(0 10px 25px rgba(0,0,0,.15));
}

/* 小サイズ背景ぼかしアクセント */
.floating-item-s::before {
  content:"";
  position:absolute; inset:0;
  backdrop-filter:blur(.5px);
  z-index:-1;
}

/* ========================================
   QR
======================================== */
.qr-fixed {
  position:fixed;
  right:24px;
  bottom:24px;
  z-index:120;
}
.qr-card {
  width:160px; height:180px;
  background:#fff;
  border-radius:16px;
  padding:14px 12px 10px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:4px;
  box-shadow:var(--shadow-soft);
}
.qr-card:hover {
  background:#fff;
}
.qr-img { width:100px; height:100px; }
.qr-img img { width:100%; height:100%; object-fit:contain; }
.qr-main {
  font-size:.95rem; font-weight:600; text-align:center;
  color:var(--primary-red); line-height:1.2;
}
.qr-sub {
  font-size:.75rem; text-align:center;
  color:var(--vibrant-orange);
}

/* ========================================
   画像サイズ調整用
   - ここで幅を変えると各サイズクラス共通で反映
   - height:auto とすると比率維持
   - 個別に変えたい場合: .pos-3 img { width:220px; }
======================================== */
.floating-item-xl img { width:480px; height:auto; }
.floating-item-l  img { width:380px; height:auto; }
.floating-item-m  img { width:260px; height:auto; }
.floating-item-s  img { width:180px; height:auto; }

/* スマホ等で更に小さくしたい場合は既存メディアクエリ内で再指定 */
@media (max-width:1024px) {
  /* 既存指定 (.floating-item-xl / -l) を img 幅に合わせて調整したいなら下記を利用
     必要なければ削除可 */
  .floating-item-xl img { width:280px; }
  .floating-item-l  img { width:240px; }
  .floating-item-m  img { width:200px; }
  .floating-item-s  img { width:150px; }
}

/* さらに狭い幅用の追加例
@media (max-width:520px) {
  .floating-item-xl img { width:240px; }
  .floating-item-l  img { width:200px; }
  .floating-item-m  img { width:160px; }
  .floating-item-s  img { width:130px; }
}
*/

/* ========================================
   レスポンシブ
======================================== */
@media (max-width:1200px) { .floating-stage { transform:none !important; } }
@media (max-width:1024px) {
  .floating-stage { transform:none !important; }
  .floating-item-xl { width:280px; height:210px; }
  .floating-item-l  { width:240px; height:180px; }
}
@media (max-width:900px) {
  body { overflow:auto; }
  .floating-stage-wrapper {
    height:auto;
    min-height:calc(100vh - 80px);
    padding:60px 0 160px;
  }
  .floating-stage { height:640px; transform:none !important; }
}
@media (max-width:768px) {
  .tgs-mini-header { height:72px; }
  .tgs-title { font-size:1.55rem; }
  .tgs-subtitle { font-size:1.05rem; }
  .floating-stage { transform:none !important; height:560px; }
  .qr-card { width:130px; height:155px; }
  .qr-img { width:86px; height:86px; }
  .qr-main { font-size:.85rem; }
  .qr-sub { font-size:.65rem; }
}
@media (max-width:520px) {
  .qr-fixed { right:14px; bottom:14px; }
}

/* === Spread Layout Overrides (全面散開 & 中央基準) === */

/* 中央基準化: top/left を要素中央に */
.floating-item {
  /* 既存 transform を置き換え (scale/appear 用) */
  transform:translate(-50%,-50%);
  opacity:1;
}

/* 画面幅 >=900px の散開座標（中央基準のため値は中心） */
@media (min-width:900px) {
  .pos-1 { top:12%; left:14%; }
  .pos-2 { top:18%; left:78%; }
  .pos-3 { top:76%; left:18%; }
  .pos-4 { top:82%; left:70%; }
  .pos-5 { top:46%; left:50%; } /* メイン */
  .pos-6 { top:60%; left:66%; }
  .pos-7 { top:26%; left:90%; }
  .pos-8 { top:68%; left:44%; }
}

/* 画面幅 <900px：縦方向に拡張し密度緩和 */
@media (max-width:899px) {
  .floating-stage { height:140vh; }
  .pos-1 { top:10%; left:20%; }
  .pos-2 { top:22%; left:74%; }
  .pos-3 { top:92%; left:28%; }
  .pos-4 { top:106%; left:78%; }
  .pos-5 { top:48%; left:48%; }
  .pos-6 { top:66%; left:70%; }
  .pos-7 { top:30%; left:90%; }
  .pos-8 { top:82%; left:40%; }
}

/* 既存の .floating-stage 縮小 (transform:scale) を無効化して重なり減 */
@media (max-width:1200px),
       (max-width:1024px),
       (max-width:900px),
       (max-width:768px),
       (max-width:520px) {
  .floating-stage { transform:none !important; }
}

/* 余白調整: ビューポート端の切れ防止で少し内側に収めたい場合は下記例を解除
.floating-stage { padding:1.5vh 1.5vw; }
*/

/* 個別サイズ data-w / data-h 用の補助
   JS が幅/高さを当てるが高さ未指定時の比率維持を明示 */
.floating-stage img[data-w] { height:auto; }
.floating-stage img[data-h] { width:auto; }